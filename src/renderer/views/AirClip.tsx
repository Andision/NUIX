import React from 'react';
import axios from 'axios';
import {
  AndroidOutlined,
  AppleOutlined,
  WindowsOutlined,
  DeleteOutlined,
  EditOutlined,
  EllipsisOutlined,
  ReloadOutlined,
} from '@ant-design/icons';
import { Tabs, Card, List, Button, PageHeader } from 'antd';
import './AirClip.css';

const { TabPane } = Tabs;

const data1 = [
  {
    content: 'è¿™é‡Œæ˜¯å‰ªè´´æ¿',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'ä¸€äº›å¤åˆ¶çš„å†…å®¹çš„æ ·ä¾‹',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'å¡ç‰‡ä¸‹éƒ¨åˆ†æ˜¯å¤åˆ¶çš„å†…å®¹',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'å¡ç‰‡ä¸Šéƒ¨åˆ†æ˜¯æ—¶é—´',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
];
const data2 = [
  {
    content: 'è¿˜å¯ä»¥åˆ‡æ¢å…¶ä»–è®¾å¤‡',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'æŸ¥çœ‹å¤šä¸ªè®¾å¤‡çš„å‰ªè´´æ¿å†…å®¹',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'æ‰€æœ‰è®¾å¤‡é€šè¿‡æ ‡ç­¾çš„æ–¹å¼æ˜¾ç¤ºåœ¨ä¸Šæ–¹ðŸ‘†',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'è¿™é‡Œæ˜¯å‰ªè´´æ¿',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'ä¸€äº›å¤åˆ¶çš„å†…å®¹çš„æ ·ä¾‹',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'å¡ç‰‡ä¸‹éƒ¨åˆ†æ˜¯å¤åˆ¶çš„å†…å®¹',
    time: '2022-08-08 08:08:08',
  },
  {
    content: 'å¡ç‰‡ä¸Šéƒ¨åˆ†æ˜¯æ—¶é—´',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬è¿™æ˜¯é•¿æ–‡æœ¬',
    time: '2022-08-08 08:08:08',
  },
  {
    content:
      'è¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\nè¿™æ˜¯æ¢è¡Œ\n',
    time: '2022-08-08 08:08:08',
  },
];

class AirClip extends React.Component {
  URL_PREFIX = 'http://localhost:5000/app/airclip';

  constructor(props) {
    super(props);

    this.getClipboard();

    // this.getClipboard = this.getClipboard.bind(this)

    this.state = {
      v: 100,
      realData: [],
      //   realData: [
      //     {
      //       content: 'å‰ªè´´æ¿',
      //       time: '2022-08-08 08:08:08',
      //     },
      //     {
      //       content: 'æ ·ä¾‹',
      //       time: '2022-08-08 08:08:08',
      //     }
      //   ],
    };
  }

  getClipboard = () => {
    console.log('click refresh!');
    axios.get(`${this.URL_PREFIX}/get_clip`).then((response) => {
      // console.log(response);
      // return response.data;
      const ret = response.data;
      console.log('ret', ret);
      this.setState({ realData: ret });
      return ret;
    });
  };

  cutStr = (str, L) => {
    let result = '';
    const strlen = str.length; // å­—ç¬¦ä¸²é•¿åº¦
    const chrlen = str.replace(/[^\x00-\xff]/g, '**').length; // å­—èŠ‚é•¿åº¦

    if (chrlen <= L) {
      return str;
    }

    for (let i = 0, j = 0; i < strlen; i++) {
      const chr = str.charAt(i);
      if (/[\x00-\xff]/.test(chr)) {
        j++; // asciiç ä¸º0-255ï¼Œä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸€ä¸ªå­—èŠ‚çš„é•¿åº¦
      } else {
        j += 2; // asciiç ä¸º0-255ä»¥å¤–ï¼Œä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸¤ä¸ªå­—èŠ‚çš„é•¿åº¦
      }
      if (j <= L) {
        // å½“åŠ ä¸Šå½“å‰å­—ç¬¦ä»¥åŽï¼Œå¦‚æžœæ€»å­—èŠ‚é•¿åº¦å°äºŽç­‰äºŽLï¼Œåˆ™å°†å½“å‰å­—ç¬¦çœŸå®žçš„+åœ¨resultåŽ
        result += chr;
      } else {
        // åä¹‹åˆ™è¯´æ˜Žresultå·²ç»æ˜¯ä¸æ‹†åˆ†å­—ç¬¦çš„æƒ…å†µä¸‹æœ€æŽ¥è¿‘Lçš„å€¼äº†ï¼Œç›´æŽ¥è¿”å›ž
        if (result == str) {
          return result;
        }

        return `${result} ......`;
      }
    }
  };

  render() {
    return (
      <div className="my-app">
        <PageHeader
          className="page-header"
          onBack={() => (window.location.href = '/')}
          title="AirClip"
          subTitle=""
        />
        <Tabs
          defaultActiveKey="0"
          tabBarExtraContent={
            <Button
              onClick={() => {
                this.getClipboard();
              }}
            >
              <ReloadOutlined />
            </Button>
          }
        >
          <TabPane
            tab={
              <span>
                <WindowsOutlined />
                Andision's ThinkPad X1C ï¼ˆæœ¬æœºï¼‰
              </span>
            }
            key="0"
          >
            <List
              grid={{ gutter: 16, column: 1 }}
              dataSource={data1}
              renderItem={(item) => (
                <List.Item>
                  <Card
                    size="small"
                    title={item.time}
                    // actions={[
                    //   <DeleteOutlined key="setting" />,
                    //   <EditOutlined key="edit" />,
                    //   <EllipsisOutlined key="ellipsis" />,
                    // ]}
                  >
                    {this.cutStr(item.content, 50)}
                  </Card>
                </List.Item>
              )}
            />
          </TabPane>
          <TabPane
            tab={
              <span>
                <AppleOutlined />
                Andision's iPhone X
              </span>
            }
            key="1"
          >
            <List
              grid={{ gutter: 16, column: 1 }}
              dataSource={data2}
              renderItem={(item) => (
                <List.Item>
                  <Card size="small" title={item.time}>
                    {item.content}
                  </Card>
                </List.Item>
              )}
            />
          </TabPane>
          <TabPane
            tab={
              <span>
                <AndroidOutlined />
                Andision's HUAWEI Mate 30
              </span>
            }
            key="2"
          >
            <List
              grid={{ gutter: 16, column: 1 }}
              dataSource={data2}
              renderItem={(item) => (
                <List.Item>
                  <Card size="small" title={item.time}>
                    {item.content}
                  </Card>
                </List.Item>
              )}
            />
          </TabPane>
          <TabPane
            tab={
              <span>
                <AndroidOutlined />
                Andision's HUAWEI Mate 31
              </span>
            }
            key="3"
          >
            <List
              grid={{ gutter: 16, column: 1 }}
              dataSource={data2}
              renderItem={(item) => (
                <List.Item>
                  <Card size="small" title={item.time}>
                    {item.content}
                  </Card>
                </List.Item>
              )}
            />
          </TabPane>
          <TabPane
            tab={
              <span>
                <AndroidOutlined />
                Andision's HUAWEI Mate 32
              </span>
            }
            key="4"
          >
            <List
              grid={{ gutter: 16, column: 1 }}
              dataSource={this.state.realData}
              renderItem={(item) => (
                <List.Item>
                  <Card size="small" title={item.time}>
                    {item.content}
                  </Card>
                </List.Item>
              )}
            />
          </TabPane>
        </Tabs>
      </div>
    );
  }
}

export default AirClip;
